# Backup + Backup Tool: –ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è –∏ –ú–æ—â–Ω–∞—è –°–∏—Å—Ç–µ–º–∞ –†–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è, –æ–±—ä–µ–¥–∏–Ω—è—é—â–∞—è –¥–≤–∞ –≤–∑–∞–∏–º–æ–¥–æ–ø–æ–ª–Ω—è—é—â–∏—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞:

* **Backup** ‚Äî —Å–æ–∑–¥–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –±—ç–∫–∞–ø—ã
* **Backup Tool** ‚Äî –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å, –ø–æ–∏—Å–∫ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫—É

–°–æ—á–µ—Ç–∞–Ω–∏–µ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç **—Å–∫–æ—Ä–æ—Å—Ç—å, –ø—Ä–æ—Å—Ç–æ—Ç—É, –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å –∏ –≥–∏–±–∫–æ—Å—Ç—å** –≤ –æ–¥–Ω–æ–º –ø–∞–∫–µ—Ç–µ.

---

## ‚ö° –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

* **–ú–æ–ª–Ω–∏–µ–Ω–æ—Å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å**: –ø–æ–∏—Å–∫ –ø–æ 100k+ —Ñ–∞–π–ª–æ–≤ –∑–∞ —Å–µ–∫—É–Ω–¥—ã, –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞, –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ I/O
* **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–µ—Å—Ç–∞**: hardlinks –≤–º–µ—Å—Ç–æ –∫–æ–ø–∏–π, –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –±—ç–∫–∞–ø—ã —Ö—Ä–∞–Ω—è—Ç —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è
* **–ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å**: —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ —Ä–∞–∑–º–µ—Ä—É, –≤—Ä–µ–º–µ–Ω–∏, –º–∞—Å–∫–∞–º, –ø—É—Ç—è–º; dry-run –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è
* **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: –∞—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏, –ø–æ–ª–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫, –∑–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–π
* **–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å**: \~350 —Å—Ç—Ä–æ–∫ Python + \~10 —Å—Ç—Ä–æ–∫ JSON –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

---

## üîß –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Backup

```
–ò—Å—Ç–æ—á–Ω–∏–∫ ‚Üí Mirror ‚Üí –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –ë—ç–∫–∞–ø—ã
src ‚Äî –∏—Å—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã
mirror ‚Äî –∂–∏–≤–æ–µ –∑–µ—Ä–∫–∞–ª–æ –≤—Å–µ—Ö –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤
backup_YYYYMMDD_HHMMSS ‚Äî –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –∫–æ–ø–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏ —É–¥–∞–ª–µ–Ω–∏–π
```

* **–õ–æ–≥–∏–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–Ω–æ–∂–µ—Å—Ç–≤**: –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–∞–º–∏ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç –Ω–æ–≤—ã–µ, –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ –∏ —É–¥–∞–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
* **–ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –±—ç–∫–∞–ø—ã**: —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ/–∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ + —É–¥–∞–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã; hardlinks —ç–∫–æ–Ω–æ–º—è—Ç –º–µ—Å—Ç–æ
* **–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ**: JSON –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä, –¥–∞—Ç—É –∏–∑–º–µ–Ω–µ–Ω–∏—è, –ø—É—Ç—å, —Ç–∏–ø –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

---

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Backup (JSON)

### –î–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏

```json
{
  "include_dirs": [".config", "Documents"],
  "track_dirs": [],
  "exclude_dirs": []
}
```

> –£–∫–∞–∑—ã–≤–∞–π—Ç–µ `exclude_dirs` —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ —É–±—Ä–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –≤–µ—Ç–∫–∏. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—Å–µ –Ω–µ –≤–∫–ª—é—á–µ–Ω–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏—Å–∫–ª—é—á–µ–Ω—ã.

### –§–∞–π–ª—ã

```json
{
  "include_files": [".*", "*.txt:rec"],
  "track_files": [],
  "exclude_files": []
}
```

* `:rec` ‚Üí —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –ø–æ–∏—Å–∫ –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö
* –ë–µ–∑ `:rec` ‚Üí —Ç–æ–ª—å–∫–æ –∫–æ—Ä–Ω–µ–≤–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è

---

## üîç –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Backup Tool

### –ü—Ä–æ—Å–º–æ—Ç—Ä –±—ç–∫–∞–ø–æ–≤

```bash
python3 backup_tool.py /–ø—É—Ç—å/–∫/–±—ç–∫–∞–ø–∞–º list
python3 backup_tool.py /–ø—É—Ç—å/–∫/–±—ç–∫–∞–ø–∞–º list --detailed
```

### –í–æ—Å—Å–æ–∑–¥–∞–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö

```bash
python3 backup_tool.py /–ø—É—Ç—å/–∫/–±—ç–∫–∞–ø–∞–º recreate
python3 backup_tool.py /–ø—É—Ç—å/–∫/–±—ç–∫–∞–ø–∞–º recreate --force
python3 backup_tool.py /–ø—É—Ç—å/–∫/–±—ç–∫–∞–ø–∞–º recreate --backup backup_20240101
```

### –ü–æ–∏—Å–∫ —Ñ–∞–π–ª–æ–≤

```bash
python3 backup_tool.py /–ø—É—Ç—å/–∫/–±—ç–∫–∞–ø–∞–º search --mask "*.py" --size ">100K" --time ">2024-01-01"
python3 backup_tool.py /–ø—É—Ç—å/–∫/–±—ç–∫–∞–ø–∞–º search --mask "*.json" --json
```

### –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

```bash
# –°–Ω–∞—á–∞–ª–∞ dry-run
python3 backup_tool.py /–ø—É—Ç—å/–∫/–±—ç–∫–∞–ø–∞–º delete backup_20240101 --mask "*.tmp" --dry-run

# –ó–∞—Ç–µ–º —É–¥–∞–ª–µ–Ω–∏–µ
python3 backup_tool.py /–ø—É—Ç—å/–∫/–±—ç–∫–∞–ø–∞–º delete backup_20240101 --mask "*.tmp"
```

---

## üìä –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

* **–ê–Ω–∞–ª–∏–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∑–∞ –Ω–µ–¥–µ–ª—é**

```bash
python3 backup_tool.py /backups search --mask "*.py" --mask "*.js" --time ">2024-01-15" --last-backups 7
```

* **–û—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤**

```bash
python3 backup_tool.py /backups delete backup_20231201 --mask "*.tmp" --mask "*.log"
```

* **–≠–∫—Å–ø–æ—Ä—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤**

```bash
python3 backup_tool.py /backups search --mask "src/*.py:rec" --json > project_stats.json
```

---

## üõ° –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

* **–ê—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏**: JSON –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
* **Hardlinks**: —ç–∫–æ–Ω–æ–º—è—Ç –º–µ—Å—Ç–æ –∏ —É—Å–∫–æ—Ä—è—é—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏
* **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**: —É—Å–∫–æ—Ä—è–µ—Ç —Ä–∞–±–æ—Ç—É —Å —Ç—ã—Å—è—á–∞–º–∏ —Ñ–∞–π–ª–æ–≤
* **–ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ**: –ø—É—Å—Ç—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —É–¥–∞–ª—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## üöÄ –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã

1. –°–æ–∑–¥–∞–π—Ç–µ `config.json` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞.
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏ —Ñ–∞–π–ª—ã.
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø–µ—Ä–≤—ã–π –±—ç–∫–∞–ø:

```bash
python3 backup.py --config config.json
```

4. –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ:

```bash
python3 backup_tool.py /backup/storage list --detailed
```

---

## üåü –ò—Ç–æ–≥

Backup + Backup Tool = **–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è, –±—ã—Å—Ç—Ä–∞—è, –±–µ–∑–æ–ø–∞—Å–Ω–∞—è, –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–∞—è –∏ –≥–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è**.
–ú–∏–Ω–∏–º—É–º –∫–æ–¥–∞ –Ω–∞ Python, –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è, –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π ‚Äî –∏–¥–µ–∞–ª—å–Ω–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤, –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤, –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–≤ –∏ –≤—Å–µ—Ö, –∫—Ç–æ —Ü–µ–Ω–∏—Ç —Å–≤–æ–µ –≤—Ä–µ–º—è –∏ –¥–∞–Ω–Ω—ã–µ.
