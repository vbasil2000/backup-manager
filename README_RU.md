# backup-manager
Утилита резервного копирования на Python без СУБД, полностью на стандартных библиотеках. Позволяет создавать независимые инкрементные бэкапы через hard links на mirror, минимизируя дублирование. Инкременты содержат только ссылки на mirror, удаленные треки корректно учитываются.

- Инкрементные бэкапы без дублирования данных (hard links).  
- Mirror каталог всегда отражает текущее состояние исходника.  
- Удаление файлов из mirror, если они удалены из исходника (track/included).  
- Метаданные инкрементов в JSON.  
- Полностью на стандартных библиотеках Python, без сторонних зависимостей.  
- Динамическая настройка через config.json, поддержка нескольких профилей (USB, второй диск, разные include/exclude).  
- Утилита `backup_tool.py` для поиска и восстановления файлов из инкрементов.
- Легко бэкапить на съемные носители: скопировал USB, запустил `backup.py` — готово!

  ### Пример config.json
```json
{
  "src": "~/Documents",
  "dist": "~/Backups",
  "include_dirs": ["Projects", "Notes"],
  "track_dirs": ["Projects"],
  "include_files": ["todo.txt", "readme.md"],
  "track_files": ["todo.txt"],
  "exclude_dirs": ["Temp", "Cache"],
  "exclude_files": ["*.log", "*.tmp"],
  "max_workers": 8
}

Алгоритм работы backup.py

    Сканирование: рекурсивное сканирование src с учетом include/exclude правил.
    Классификация: разделение файлов на tracked и non-tracked.
    Сравнение: проверка изменений относительно текущего mirror.
    Инкремент: создание hard links для новых/измененных файлов и ссылок на удаленные треки.
    Обновление mirror: копирование новых/измененных файлов.
    Очистка: удаление файлов отсутствующих в исходнике.
    Метаданные: генерация JSON с информацией о новых, измененных и удаленных файлах.

Использование

python3 backup.py                               # Запуск бэкапа с config.json
python3 backup.py --config myconf.json          # Запуск с кастомным конфигом
python3 backup_tool.py search --mask "*.pdf"    # Поиск/восстановление файлов из инкрементов
