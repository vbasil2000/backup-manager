# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ Backup Tool

## –û–ø–∏—Å–∞–Ω–∏–µ

–£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–º–∏ –±—ç–∫–∞–ø–∞–º–∏. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–±–æ—Ä–∞–º–∏ –±—ç–∫–∞–ø–æ–≤, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö, –ø–æ–∏—Å–∫ —Ñ–∞–π–ª–æ–≤ –∏ —É–¥–∞–ª–µ–Ω–∏–µ —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

* `list` - –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –±—ç–∫–∞–ø–æ–≤ —Å –∫—Ä–∞—Ç–∫–æ–π –∏–ª–∏ –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
* `recreate` - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ JSON –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≤—Å–µ—Ö –∏–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –±—ç–∫–∞–ø–∞
* `search` - –ü–æ–∏—Å–∫ —Ñ–∞–π–ª–æ–≤ –ø–æ –º–∞—Å–∫–∞–º, —Ä–∞–∑–º–µ—Ä—É, –≤—Ä–µ–º–µ–Ω–∏, –ø—Ä–µ—Ñ–∏–∫—Å—É –ø—É—Ç–∏
* `delete` - –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –∏–∑ –±—ç–∫–∞–ø–∞ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é dry-run

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
git clone <your-repo-url>
cd backup_tool
python3 backup_tool.py /path/to/backups <command>
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ—Å–º–æ—Ç—Ä –±—ç–∫–∞–ø–æ–≤

```bash
python3 backup_tool.py /path/to/backups list
python3 backup_tool.py /path/to/backups list --detailed
```

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö

```bash
python3 backup_tool.py /path/to/backups recreate
python3 backup_tool.py /path/to/backups recreate --force
python3 backup_tool.py /path/to/backups recreate --backup backup_20240101
```

### –ü–æ–∏—Å–∫ —Ñ–∞–π–ª–æ–≤

```bash
python3 backup_tool.py /path/to/backups search --mask "*.txt"
python3 backup_tool.py /path/to/backups search --mask "*.py" --size ">100K" --time ">2024-01-01"
python3 backup_tool.py /path/to/backups search --mask "*.log" --last-backups 5
python3 backup_tool.py /path/to/backups search --mask "*.json" --json
```

### –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

```bash
python3 backup_tool.py /path/to/backups delete backup_20240101 --mask "*.tmp" --dry-run
python3 backup_tool.py /path/to/backups delete backup_20240101 --mask "*.tmp"
```

## –§–∏–ª—å—Ç—Ä—ã –ø–æ–∏—Å–∫–∞

* `--mask` - –ú–∞—Å–∫–∏ —Ñ–∞–π–ª–æ–≤ (\*.txt, *.py, file.*)
* `--size` - –§–∏–ª—å—Ç—Ä—ã –ø–æ —Ä–∞–∑–º–µ—Ä—É:

  * `>100M` (–±–æ–ª—å—à–µ 100MB)
  * `<1G` (–º–µ–Ω—å—à–µ 1GB)
  * `500K-2M` (–æ—Ç 500KB –¥–æ 2MB)
* `--time` - –§–∏–ª—å—Ç—Ä—ã –ø–æ –≤—Ä–µ–º–µ–Ω–∏:

  * `2024-01-01` (–∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –¥–∞—Ç–∞)
  * `>2024-01-01` (–ø–æ—Å–ª–µ –¥–∞—Ç—ã)
  * `<2024-01-15` (–¥–æ –¥–∞—Ç—ã)
  * `2024-01-01..2024-01-15` (–¥–∏–∞–ø–∞–∑–æ–Ω –¥–∞—Ç)
* `--path` - –ü—Ä–µ—Ñ–∏–∫—Å –ø—É—Ç–∏ (src/, config/)
* `--last-backups` - –¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ N –±—ç–∫–∞–ø–æ–≤

## –§–æ—Ä–º–∞—Ç—ã –≤—ã–≤–æ–¥–∞

* **–ß–∏—Ç–∞–µ–º—ã–π –¥–ª—è —á–µ–ª–æ–≤–µ–∫–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)**:

  * –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è–º
  * –¶–≤–µ—Ç–æ–≤–∞—è –ø–æ–¥—Å–≤–µ—Ç–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
  * –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã —Ñ–∞–π–ª–æ–≤
  * –ß–∏—Å—Ç–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü
* **JSON (`--json`)**:

  * –ú–∞—à–∏–Ω–æ—á–∏—Ç–∞–µ–º—ã–π –≤—ã–≤–æ–¥
  * –ü–æ–ª–Ω—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª–æ–≤
  * –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å–∫—Ä–∏–ø—Ç–æ–≤

## –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

```
üì¶ backup_20240101 (2024-01-01 14:30)

  üìÅ src/
     –ò–º—è —Ñ–∞–π–ª–∞                   –†–∞–∑–º–µ—Ä      –î–∞—Ç–∞    –°—Ç–∞—Ç—É—Å
     --------------------------  ---------  ----------  ------
     main.py                      1.2 KB     2024-01-01  ‚úÖ
     utils.py                     0.8 KB     2024-01-01  ‚úÖ

  üìÅ config/
     settings.json                0.5 KB     2024-01-01  ‚úÖ
     old_config.json              ‚ùå         2023-12-15  ‚ùå

–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞:
   –ë—ç–∫–∞–ø–æ–≤: 1
   –§–∞–π–ª–æ–≤: 4
   –†–∞–∑–º–µ—Ä: 2.5 KB
   Tracked: 3, Deleted: 1
```

## –ß–∞—Å—Ç—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ù–∞–π—Ç–∏ –Ω–µ–¥–∞–≤–Ω–æ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥–∏

```bash
python3 backup_tool.py /backups search \
  --mask "*.json" --mask "*.yaml" --mask "*.conf" \
  --time ">2024-01-01" \
  --last-backups 7
```

### –û—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

```bash
# –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–æ
python3 backup_tool.py /backups delete backup_20240101 \
  --mask "*.tmp" --mask "*.log" --mask "*.cache" \
  --dry-run

# –ó–∞—Ç–µ–º —É–¥–∞–ª–∏—Ç—å —Ä–µ–∞–ª—å–Ω–æ
python3 backup_tool.py /backups delete backup_20240101 \
  --mask "*.tmp" --mask "*.log" --mask "*.cache"
```

### –≠–∫—Å–ø–æ—Ä—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞

```bash
python3 backup_tool.py /backups search \
  --mask "*.py" --size ">100K" \
  --json > large_python_files.json
```
