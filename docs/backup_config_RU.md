# üìã –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Axiomatic Backup System

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—á–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```json
{
  "src": "/home/username",
  "dst": "/mnt/backup",
  "include_dirs": ["–î–æ–∫—É–º–µ–Ω—Ç—ã", "–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è", ".config"]
}
```

### –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞
python backup.py --config config.json

# –ü—Ä–æ—Å–º–æ—Ç—Ä –±—ç–∫–∞–ø–æ–≤
python backup_tool.py /mnt/backup list

# –ü–æ–∏—Å–∫ —Ñ–∞–π–ª–æ–≤
python backup_tool.py /mnt/backup search --mask "*.txt"
```

## –ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```json
{
  "src": "/home/user/data",
  "dst": "/mnt/backup/storage",
  "max_workers": 8,
  "directory_priority": "include",

  "include_dirs": [
    ".config",
    ".local/share",
    "Documents",
    "Projects/work",
    "Photos/2024"
  ],

  "track_dirs": [
    "Projects/active",
    "Downloads/important",
    "Documents/*/current"
  ],

  "exclude_dirs": [
    "temp",
    "cache",
    "node_modules",
    "Projects/old"
  ],

  "include_files": [
    ".*",
    ".bash*",
    "*.important",
    "Projects/backup_system/*.py:rec"
  ],

  "track_files": [
    "*.log:rec",
    "report_*.pdf",
    "Projects/*/data.json:rec"
  ],

  "exclude_files": [
    "*.tmp:rec",
    "*.swp:rec",
    "*.cache:rec"
  ],

  "preserved_dirs": [
    ".git",
    ".svn",
    "node_modules"
  ]
}
```

## –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### üîß –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
| –ü–∞—Ä–∞–º–µ—Ç—Ä          | –¢–∏–ø     | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ                                 |
|-------------------|---------|--------------|--------------|-----------------------------------------|
| src               | string  | ‚úÖ           | -            | –ê–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å –∫ –∏—Å—Ö–æ–¥–Ω—ã–º –¥–∞–Ω–Ω—ã–º       |
| dst               | string  | ‚úÖ           | -            | –ü—É—Ç—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –±—ç–∫–∞–ø–æ–≤              |
| max_workers       | integer | ‚ùå           | 8            | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç–æ–∫–æ–≤ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏       |
| directory_priority| string  | ‚ùå           | "include"    | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø—Ä–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞—Ö: include/track|

### üìÅ –ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π (—Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ)
| –ü—Ä–∞–≤–∏–ª–æ       | –¢–∏–ø    | –û–ø–∏—Å–∞–Ω–∏–µ                                        |
|---------------|--------|-------------------------------------------------|
| include_dirs  | array  | –î–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—Å–µ–≥–¥–∞ –≤–∫–ª—é—á–∞—é—Ç—Å—è –≤ –±—ç–∫–∞–ø   |
| track_dirs    | array  | –î–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π           |
| exclude_dirs  | array  | –î–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, –∏—Å–∫–ª—é—á–∞–µ–º—ã–µ –∏–∑ –æ–±—Ä–∞–±–æ—Ç–∫–∏            |

### üìÑ –ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è —Ñ–∞–π–ª–æ–≤
| –ü—Ä–∞–≤–∏–ª–æ       | –¢–∏–ø    | –û–ø–∏—Å–∞–Ω–∏–µ                                         |
|---------------|--------|--------------------------------------------------|
| include_files | array  | –§–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤—Å–µ–≥–¥–∞ –≤–∫–ª—é—á–∞—é—Ç—Å—è                 |
| track_files   | array  | –§–∞–π–ª—ã –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π                 |
| exclude_files | array  | –§–∞–π–ª—ã, –∏—Å–∫–ª—é—á–∞–µ–º—ã–µ –∏–∑ –±—ç–∫–∞–ø–∞                     |

### ‚öôÔ∏è –°–ª—É–∂–µ–±–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
| –ü–∞—Ä–∞–º–µ—Ç—Ä       | –¢–∏–ø    | –û–ø–∏—Å–∞–Ω–∏–µ                                              |
|----------------|--------|-------------------------------------------------------|
| preserved_dirs | array  | –î–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è –¥–∞–∂–µ –µ—Å–ª–∏ –ø—É—Å—Ç—ã–µ     |

## –ü—Ä–∏–º–µ—Ä—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

### üè† –î–æ–º–∞—à–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
```json
{
  "src": "/home/user",
  "dst": "/mnt/backup",
  "include_dirs": ["–î–æ–∫—É–º–µ–Ω—Ç—ã", "–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è", "–í–∏–¥–µ–æ", ".config", ".ssh"],
  "exclude_dirs": ["–ó–∞–≥—Ä—É–∑–∫–∏", "–ö–æ—Ä–∑–∏–Ω–∞", "tmp"]
}
```

### üíª –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
```json
{
  "src": "/home/dev",
  "dst": "/mnt/backup",
  "max_workers": 12,
  "directory_priority": "include",
  "include_dirs": [".config", ".ssh", "projects"],
  "track_dirs": ["projects/current", "projects/active"],
  "include_files": [".*", "*.env:rec", "config.json:rec"],
  "exclude_dirs": ["projects/old", "node_modules", "target", "dist"],
  "exclude_files": ["*.log:rec", "*.tmp:rec", "*.cache:rec"]
}
```

### üñ•Ô∏è –°–µ—Ä–≤–µ—Ä
```json
{
  "src": "/",
  "dst": "/backup",
  "max_workers": 16,
  "include_dirs": ["/etc", "/home", "/var/log", "/usr/local/etc"],
  "track_dirs": ["/home/users", "/var/www", "/var/db"],
  "exclude_dirs": ["/tmp", "/proc", "/sys", "/dev", "/run"],
  "exclude_files": ["*.tmp:rec", "*.log:rec", "*.pid:rec"]
}
```

### üéØ –¢–æ–ª—å–∫–æ –≤–∞–∂–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
```json
{
  "src": "/home/user",
  "dst": "/mnt/backup",
  "include_files": ["*.important:rec", "passwords.kdbx:rec", "*.kdb:rec", "recovery-codes.txt:rec"],
  "track_files": ["*.docx:rec", "*.xlsx:rec", "projects/*.pptx:rec"]
}
```

## –ü—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã

### üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã
- –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é - –≤–∫–ª—é—á–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ —è–≤–Ω–æ —É–∫–∞–∑–∞–Ω–æ
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Ñ–∞–π–ª–æ–≤ –Ω–∞–¥ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è–º–∏
- Include > Track - –≤–∫–ª—é—á–µ–Ω–∏–µ –∏–º–µ–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞–¥ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ–º
- –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ—Å—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π - –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –≤—Å–µ–≥–¥–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ

### üîÑ –ü–æ—Ä—è–¥–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–∞–≤–∏–ª
```python
# 1. –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
include_dirs = expand_directories(config.include_dirs)
track_dirs = expand_directories(config.track_dirs)

# 2. –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
files_from_include_dirs = scan(include_dirs)
files_from_track_dirs = scan(track_dirs)

# 3. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
if directory_priority == "include":
    final_dirs_files = files_from_include_dirs | (files_from_track_dirs - files_from_include_dirs)
else:
    final_dirs_files = files_from_track_dirs | (files_from_include_dirs - files_from_track_dirs)

# 4. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤—ã—Ö –ø—Ä–∞–≤–∏–ª
include_files = expand_file_patterns(config.include_files)
track_files = expand_file_patterns(config.track_files) - include_files

# 5. –ò—Ç–æ–≥–æ–≤—ã–µ –º–Ω–æ–∂–µ—Å—Ç–≤–∞
all_files = final_dirs_files | include_files | track_files
tracked_files = (files_from_track_dirs - files_from_include_dirs) | track_files
```

### üìä –ú–∞—Ç—Ä–∏—Ü–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤
| –°–∏—Ç—É–∞—Ü–∏—è                               | –†–µ–∑—É–ª—å—Ç–∞—Ç                             |
|----------------------------------------|---------------------------------------|
| –§–∞–π–ª –≤ include_dirs –∏ track_dirs       | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç directory_priority         |
| –§–∞–π–ª –≤ include_files –∏ track_dirs      | include (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Ñ–∞–π–ª–æ–≤)            |
| –§–∞–π–ª –≤ exclude_dirs –Ω–æ –≤ include_files | include (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Ñ–∞–π–ª–æ–≤)            |
| –§–∞–π–ª —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç exclude_files       | –ò—Å–∫–ª—é—á–∞–µ—Ç—Å—è (–∫—Ä–æ–º–µ include_files)     |

## –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

- –ù–∞—á–∏–Ω–∞–π—Ç–µ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```json
{"src": "/home/user", "dst": "/backup", "include_dirs": ["–î–æ–∫—É–º–µ–Ω—Ç—ã"]}
```
- –î–æ–±–∞–≤–ª—è–π—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ: —Å–Ω–∞—á–∞–ª–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, –∑–∞—Ç–µ–º –∏—Å–∫–ª—é—á–µ–Ω–∏—è, –ø–æ—Ç–æ–º —Ñ–∞–π–ª–æ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–µ –º–∞—Å–∫–∏ –¥–ª—è —Ñ–∞–π–ª–æ–≤
```json
"include_files": ["*.important:rec"]
```
- –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
```bash
python backup.py --config config.json --dry-run
python backup_tool.py /backup search --mask "*"
```

### ‚ùå –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏
| –û—à–∏–±–∫–∞                         | –ü—Ä–∏–º–µ—Ä ‚ùå                     | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ‚úÖ                       |
|--------------------------------|-------------------------------|-------------------------------------|
| –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –ø—É—Ç–∏             | {"src": "Documents"}          | {"src": "/home/user/Documents"}  |
| –ö–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–µ –ø—Ä–∞–≤–∏–ª–∞          | include_dirs: ["projects"]    | exclude_dirs: ["projects/important"] - ‚ùå|
| –ò–∑–±—ã—Ç–æ—á–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞             | include_dirs: ["documents"]   | include_files: ["documents/*.txt"] - ‚ùå|
| –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –º–∞—Å–∫–∏             | include_files: ["*.txt"]      | include_files: ["*.txt:rec"] ‚úÖ    |

## –û—Ç–ª–∞–¥–∫–∞ –∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –æ—à–∏–±–æ–∫

### üîç –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ JSON
```bash
python -m json.tool config.json
```
- –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫
```bash
python backup.py --config config.json --dry-run
```
- –ê–Ω–∞–ª–∏–∑ –ø–æ–∫—Ä—ã—Ç–∏—è
```bash
python backup_tool.py /backup search --mask "*" --json > coverage.json
python backup_tool.py /backup search --mask "*.tmp" --path "cache"
```
- –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
python backup.py --config config.json --debug
```
- –†–µ—à–µ–Ω–∏–µ —á–∞—Å—Ç—ã—Ö –ø—Ä–æ–±–ª–µ–º (–±–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã, –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã, –æ—à–∏–±–∫–∏ –¥–æ—Å—Ç—É–ø–∞)

### üìù –ß–µ–∫–ª–∏—Å—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- –ü—Ä–æ–≤–µ—Ä–µ–Ω —Å–∏–Ω—Ç–∞–∫—Å–∏—Å JSON
- –í—Å–µ –ø—É—Ç–∏ –∞–±—Å–æ–ª—é—Ç–Ω—ã–µ
- –î–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ src –∏ dst —Å—É—â–µ—Å—Ç–≤—É—é—Ç
- –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏—Ö –ø—Ä–∞–≤–∏–ª
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω dry-run
- –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ñ–∞–π–ª–æ–≤
- –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –∏—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ
Axiomatic Backup System –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≥–∏–±–∫—É—é –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—É—é —Å–∏—Å—Ç–µ–º—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –æ—Å–Ω–æ–≤–∞–Ω–Ω—É—é –Ω–∞ —á–µ—Ç–∫–∏—Ö –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö. –ù–∞—á–Ω–∏—Ç–µ —Å –ø—Ä–æ—Å—Ç–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —É—Ç–æ—á–Ω—è–π—Ç–µ –ø—Ä–∞–≤–∏–ª–∞.

–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- ‚úÖ –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å –∏ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å
- ‚úÖ –ì–∏–±–∫–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥ –ª—é–±—ã–µ –Ω—É–∂–¥—ã
- ‚úÖ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
- ‚úÖ –ü—Ä–æ—Å—Ç–æ—Ç–∞ –æ—Ç–ª–∞–¥–∫–∏ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

–î–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –ø–æ–º–æ—â–∏:
```bash
python backup.py --help
python backup_tool.py --help
```
